#content-header-container
  #content-header
    #organization-profile-header
      
#content-main-container
  #content-main-wrapper
    #content-main
      #new-opening.main-section
        %h1 Create your job opening
        
        #new-opening-form
          #form-error.hide
          - form_tag "/manage/openings" do
            
            = render :partial => "/contracts/forms/organization.haml"
            = render :partial => "/contracts/forms/position.haml"
                
            #description
              = text_area_tag "contract[description]", nil, {:autocomplete => "off", :field_name => "Description"}
              
            #period.form-section
              %label Period
              
              = check_box_tag "contract[from][start_asap]", nil, false, {:id => "start_asap", :autocomplete => "off"}
              %p Starting as soon as possible
              = check_box_tag "contract[to][open_ended]", nil, false, {:id => "open_ended", :autocomplete => "off"}
              %p Open ended
              %br
              %br
              
              = render :partial => "/contracts/forms/start_and_end_dates"
              = render :partial => "/contracts/forms/contract"
              
            .form-section-actions
              =submit_tag "Save"
  
  #sidebar-container
    #sidebar
    #sidebar-bottom
    
:javascript

  jQuery(document).ready(function()
  {
    jQuery("#new-opening-form form").ajaxify_form();
    
    searchify_section("#organization", "/autocomplete/organizations");
    
    jQuery("#start_asap").bind("change", function(e) { e.currentTarget.checked ? jQuery("#contract_from").hide() : jQuery("#contract_from").show(); })
    jQuery("#open_ended").bind("change", function(e) { e.currentTarget.checked ? jQuery("#contract_to").hide() : jQuery("#contract_to").show(); })
    jQuery("#contract_contract_rate_type_id").bind("change", function(e) { jQuery(this).val() == "5" ? jQuery("#contract_rate").hide() : jQuery("#contract_rate").show(); })
  
  })

